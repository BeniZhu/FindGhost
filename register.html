
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>注册</title>
  </head>
  <body>
  <div id="pannel_register">
  <h1>注册用户</h1>
    <div><label for="name">昵称</label> <input id="name" type="text" name="name" required></div>
    <div><label for="email">邮箱</label> <input id="email" type="email" name="email" required></div>
    <div><label for="password">密码</label> <input id="password" type="password" name="password" required></div>
    <div><label for="password_rp">重复</label> <input id="password_rp" type="password" name="password_rp" required></div>
    <div><button onclick="doRegister();" id="bt_register">注册</button></div>
    </div>
  </body>
  <script src="https://www.gstatic.com/firebasejs/3.6.2/firebase.js"></script>
  <script src="js/init.js"></script>
  <script src="js/const.js"></script>
  <script src="js/user.js"></script>
  <script type="text/javascript">
      function doRegister() {
    var user = firebase.auth().currentUser;
    if (user) {
          firebase.auth().signOut();
        }
        var name = document.getElementById("name").value;
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        var password_rp = document.getElementById("password_rp").value;
        if (password != password_rp) {
            alert("两次密码输入不一样");
            return;
        }
        register(name, email, password);
    }



firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
        window.location = "main.html";
        document.getElementById("pannel_register").setAttribute("style","display:none");
        name = user.displayName;
        email = user.email;
        photoUrl = user.photoURL;
        uid = user.uid;
    } else {
        document.getElementById("pannel_register").setAttribute("style","display:block");
    }
});
  </script>

</html>